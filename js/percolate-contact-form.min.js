Percolate="undefined"==typeof Percolate?{}:Percolate,Percolate.Contact={},Percolate.Contact.Overlay=React.createClass({displayName:"Overlay",propTypes:{containerElement:React.PropTypes.instanceOf(Element)},getDefaultProps:function(){return{containerElement:null}},setOpen:function(e){jQuery(this.props.containerElement).toggleClass("contact-open",!!e)},handleClose:function(e){e.preventDefault(),this.setOpen(!1)},render:function(){return React.createElement("div",{className:"percolate-contact-overlay"},React.createElement("a",{className:"overlay-close",onClick:this.handleClose},React.createElement("span",{className:"icon-cross"})),React.createElement(Percolate.Contact.Form,{setOverlayOpen:this.setOpen}))}}),Percolate.Contact.Footer=React.createClass({displayName:"Footer",render:function(){return React.createElement("div",{className:"ancillary-contact vcard"},React.createElement("div",{className:"wrapper-connect"},React.createElement("div",{className:"title-ancillary"},"Connect"),React.createElement("div",{className:"list"},React.createElement("a",{className:"url monochrome",href:"http://twitter.com/percolatestudio",target:"_blank"},"Twitter"),React.createElement("a",{className:"url monochrome",href:"http://github.com/percolatestudio",target:"_blank"},"Github"),React.createElement("a",{className:"email monochrome",href:"mailto:us@percolatestudio.com?subject=Hello%20Percolate"},"Email"))),React.createElement("div",{className:"wrapper-visit"},React.createElement("div",{className:"title-ancillary"},"Visit Us"),React.createElement("a",{className:"location-wrapper organization-unit adr",href:"https://www.google.com/maps/place/169+11th+St,+San+Francisco,+CA+94103/@37.77357,-122.415787,17z/data=!3m1!4b1!4m2!3m1!1s0x8085809d83ced185:0xf5e9ad23d5cd5ce5",target:"_blank"},React.createElement("span",{className:"fn organization-name",style:{display:"none"}},"Percolate Studio"),React.createElement("span",null,"Percolate USA"),React.createElement("br",null),React.createElement("span",{className:"street-address"},"169 11th Street"),React.createElement("br",null),React.createElement("span",{className:"locality"},"San Francisco"),", ",React.createElement("span",{className:"region"},"CA")," ",React.createElement("span",{className:"postal-code"},"94103")),React.createElement("a",{className:"location-wrapper organization-unit adr",href:"https://www.google.com/maps/place/50+Herbert+St,+Northcote+VIC+3070,+Australia/@-37.771764,144.995165,17z/data=!3m1!4b1!4m2!3m1!1s0x6ad6437ca420f13f:0xb6908ada5cdfa379",target:"_blank"},React.createElement("span",null,"Percolate AUS"),React.createElement("br",null),React.createElement("span",{className:"street-address"},"50 Herbert Street"),React.createElement("br",null),React.createElement("span",{className:"locality"},"Melbourne"),", ",React.createElement("span",{className:"region"},"VIC")," ",React.createElement("span",{className:"postal-code"},"3001"))))}});var gatherTruthy=function(){var e=Array.prototype.slice.call(arguments),t=[];return obj=e.shift(),_.each(e,function(e){obj[e]&&-1===t.indexOf(e)&&t.push(e)}),t};Percolate.Contact.Form=React.createClass({displayName:"Form",mixins:[React.addons.LinkedStateMixin],getInitialState:function(){return{name:"",email:"",about:"",strategy:!1,design:!1,engineering:!1,consulting:!1,today:!1,quarter:!1,year:!1,"25k":!1,"50k":!1,"100k":!1,notsure:!1,errors:{},submitting:!1}},getModel:function(){var e=_.pick(this.state,"name","email","about");return e.services=gatherTruthy(this.state,"strategy","design","engineering","consulting"),e.timing=gatherTruthy(this.state,"today","quarter","year"),e.budget=gatherTruthy(this.state,"25k","50k","100k","notsure"),e},handleSubmit:function(e){e.preventDefault(),this.validate()&&this.send()},componentDidMount:function(){jQuery(this.refs.about.getDOMNode()).autosize()},alertClass:function(e){return this.state.errors[e]?"alert":""},validate:function(){var e=this.state.errors={},t=!0,a=this.getModel();return _.each(["name","email","about"],function(n){a[n]?a[n].length>1e4&&(e[n]="is too long",t=!1):(e[n]="is required",t=!1)}.bind(this)),_.each(["services","timing"],function(n){a[n].length||(e[n]="is required",t=!1)}.bind(this)),this.shouldHaveBudget()&&!a.budget.length&&(e.budget="is required",t=!1),this.setState({errors:e}),t},send:function(e){var e=this.getModel(),t="us@percolatestudio.com",a="Work with us",n=React.renderToStaticMarkup(React.createElement(Percolate.Contact.FormEmail,{model:e})),l={key:"-JqlbKb2ZHU7R5NEkCvnKw",message:{from_email:e.email,to:[{email:t,name:"Percolate Studio",type:"to"},{email:"zol@percolatestudio.com",name:"Zoltan Olah",type:"to"}],autotext:"true",subject:a,html:n}};this.setState({submitting:!0}),jQuery.post("https://mandrillapp.com/api/1.0/messages/send.json",l).done(function(){alert("Thank you. We will contact you shortly")}).fail(function(){window.open("mailto:"+t+"?subject="+a+" (mailto)&body="+escape(n))}).always(function(){this.setState({submitting:!1}),this.props.setOverlayOpen(!1)}.bind(this))},error:function(e){return this.state.errors[e]?React.createElement("span",{className:"error"},this.state.errors[e]):void 0},shouldHaveBudget:function(){return this.state.strategy||this.state.design||this.state.engineering},render:function(){var e="fieldset-group hidden "+(this.shouldHaveBudget()?"visible":""),t=this.error("services"),a=t?t:React.createElement("span",{className:"subtext"},"Select all that apply");return React.createElement("form",{className:"contact-form-wrapper",onSubmit:this.handleSubmit},React.createElement("div",{className:"title-overlay"},"Work with us"),React.createElement("fieldset",null,React.createElement("div",{className:"input-symbol left"},React.createElement("input",{type:"text",name:"name",className:this.alertClass("name"),placeholder:"Name",valueLink:this.linkState("name")}),React.createElement("span",{className:"icon-user"})),React.createElement("div",{className:"input-symbol left"},React.createElement("input",{type:"email",name:"email",className:this.alertClass("email"),placeholder:"Email Address",valueLink:this.linkState("email")}),React.createElement("span",{className:"icon-email"})),React.createElement("textarea",{className:"about "+this.alertClass("about"),name:"about",placeholder:"About your company and project",valueLink:this.linkState("about"),ref:"about"}),React.createElement("div",{className:"fieldset-group services"},React.createElement("div",{className:"fieldset-group-title"},"Services ",a),React.createElement("div",{className:"btns-group"},React.createElement("input",{type:"checkbox",name:"services",value:"strategy",id:"strategy",checkedLink:this.linkState("strategy")}),React.createElement("label",{htmlFor:"strategy",className:"btn-toggle"},"Strategy"),React.createElement("input",{type:"checkbox",name:"services",value:"design",id:"design",checkedLink:this.linkState("design")}),React.createElement("label",{htmlFor:"design",className:"btn-toggle"},"Design"),React.createElement("input",{type:"checkbox",name:"services",value:"engineering",id:"engineering",checkedLink:this.linkState("engineering")}),React.createElement("label",{htmlFor:"engineering",className:"btn-toggle"},"Engineering"),React.createElement("input",{type:"checkbox",name:"services",value:"consulting",id:"consulting",checkedLink:this.linkState("consulting")}),React.createElement("label",{htmlFor:"consulting",className:"btn-toggle"},"Consulting"))),React.createElement("div",{className:"fieldset-group"},React.createElement("div",{className:"fieldset-group-title"},"Timing ",this.error("timing")),React.createElement("div",{className:"btns-group"},React.createElement("input",{type:"radio",name:"timing",value:"today",id:"today",checkedLink:this.linkState("today")}),React.createElement("label",{htmlFor:"today",className:"btn-toggle"},"Today"),React.createElement("input",{type:"radio",name:"timing",value:"quarter",id:"quarter",checkedLink:this.linkState("quarter")}),React.createElement("label",{htmlFor:"quarter",className:"btn-toggle"},"Quarter"),React.createElement("input",{type:"radio",name:"timing",value:"year",id:"year",checkedLink:this.linkState("year")}),React.createElement("label",{htmlFor:"year",className:"btn-toggle"},"This Year"))),React.createElement("div",{className:e},React.createElement("div",{className:"fieldset-group-title"},"Budget ",this.error("budget")),React.createElement("div",{className:"btns-group"},React.createElement("input",{type:"radio",name:"budget",value:"25k",id:"25k",checkedLink:this.linkState("25k")}),React.createElement("label",{htmlFor:"25k",className:"btn-toggle"},"25k–50k"),React.createElement("input",{type:"radio",name:"budget",value:"50k",id:"50k",checkedLink:this.linkState("50k")}),React.createElement("label",{htmlFor:"50k",className:"btn-toggle"},"50k–100k"),React.createElement("input",{type:"radio",name:"budget",value:"100k",id:"100k",checkedLink:this.linkState("100k")}),React.createElement("label",{htmlFor:"100k",className:"btn-toggle"},"+100k"),React.createElement("input",{type:"radio",name:"budget",value:"notsure",id:"notsure",checkedLink:this.linkState("notsure")}),React.createElement("label",{htmlFor:"notsure",className:"btn-toggle"},"Not sure"))),React.createElement("button",{className:"btn-primary caps",disabled:this.state.submitting,type:"submit"},"Send Message")),React.createElement(Percolate.Contact.Footer,null))}}),Percolate.Contact.FormEmail=React.createClass({displayName:"FormEmail",render:function(){var e=this.props.model,t=e.services.map(function(e,t){return React.createElement("li",{key:t},e)}),a=e.timing.join(),n=e.budget.join(),l=n?[React.createElement("dt",{key:"0"},"Budget"),React.createElement("dd",{key:"1"},n)]:null;return React.createElement("dl",null,React.createElement("dt",null,"Name"),React.createElement("dd",null,e.name),React.createElement("dt",null,"Email"),React.createElement("dd",null,e.email),React.createElement("dt",null,"About"),React.createElement("dd",null,e.about),React.createElement("dt",null,"Services"),React.createElement("dd",null,React.createElement("ul",null,t)),React.createElement("dt",null,"Timing"),React.createElement("dd",null,a),l,React.createElement("dt",null,"Referer"),React.createElement("dd",null,"Blog"))}});