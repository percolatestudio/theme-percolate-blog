.section-comments {
  background: @color-raw-alt !important;

  .title-section {
    padding-bottom: 1.25rem;
  }

  form {
    .subtitle {
      .page-subtitle(@color-well);
      margin-bottom: .5em;
    }
    .input-symbol,
    textarea {
      max-width: 100%;
      width: 100%;
    }
    button[type=submit],
    #cancel-comment-reply-link {
      width: 100%;
      @media only screen and (min-width: 40em) {
        width: auto;
      }
    }
    button + #cancel-comment-reply-link {
      margin-top: .5em;
      @media only screen and (min-width: 40em) { margin-top: 0; }
    }
  }

}

.commentlist {
  .std-xpadding;
  .std-ypadding;

  @media only screen and (min-width: @breakpoint) {
    margin: 0 auto;
    max-width: 800px;
    width: 75%;
  }
}

.comment-lockup {
  margin-bottom: 1.5em;
  position: relative;

  .display(flex);
  .flex-wrap(wrap);

  .avatar-wrapper {
    display: block;
    margin-right: 1.25em;
    .avatar {
      display: block;
      height: auto;
      width: 3em;
    }
  }
  .meta { .flex(1); }

  .name {
    .background-image(none);
    .type-semibold;
    display: inline-block;
    line-height: 1.75em; //same as formatting
  }
  .formatting {
    margin-bottom: .5em;
  }
  .bullet {
    display: inline-block;
    margin: 0 .75em;
    color: @color-medium-rare;
    &:before {
      content: '\02022';
    }
  }
  .date,
  .comment-reply-link,
  .comment-edit-link {
    .font-s2;
    .link-underline(@color-medium-rare, @color-primary, @color-well, 0%);
  }

  .note {
    //this is when a comment is submitted and is awaiting moderation
    .font-s2;
    .position(relative, auto, auto, auto, auto, 100%);
    @media only screen and (min-width: @breakpoint) {
      .position(absolute, auto, -2.5em, auto, auto, 160px);
      .transform(translateX(100%));
    }
  }
}//comment-lockup

ul { //nested comments
  padding-left: 4.25em;
  .comment-lockup {
    .avatar-wrapper {
      margin-right: .75em;
      .avatar { width: 1.75em; }
    }
  }
}

// for respond styling and edgecases
#respond {
  .std-xpadding;

  fieldset {
    padding-top: 0; //overrides fieldset styling
    padding-bottom: 0; //overrides fieldset styling

  }

  .subtext,
  .comment-subscription-form > * {
    .font-s2;
  }
  .comment-subscription-form { //this only appears if you have Jetpack subscriptions activated
    margin-top: .75em;
    & + .comment-subscription-form {
      margin-top: 0;
    }
  }

  textarea {
    margin-bottom: 2rem;
  }
}

.commentlist + #respond, {
  margin-top: -2rem;
  margin-bottom: 2.5rem;


  @media only screen and (min-width: @breakpoint) {
    margin-left: 12.5%;
    max-width: 640px;
    width: 75%;
  }
}

li.comment {
  &.depth-1 + #respond,
  &.depth-2 + #respond { // spacing between responses and next comments
    margin-bottom: 3em;
  }
  &.depth-1 + #respond { padding-left: 4.25em; } //nested avatar allowance

  &.depth-1:last-of-type + #respond { margin-bottom: 0; } // remove margin for last comment

}
